project:
  name: "HilliumOS Core"
  description: "Public MVP code repository (hillium-core)."
  root_path: "."

rules:
  - "EXECUTION ROOT: You are currently AT the project root."
  - "NO NESTING: All file operations must happen in the current directory ('.')."
  - "FORBIDDEN: DO NOT create a project subfolder (e.g. 'hilliumos/', 'hillium-core/')."
  - "DOCS: MVP docs and Work Packages live in /Users/jsaldana/GitLocalRepo/HilliumOS (read-only)."
  - "PRIVATE: Roadmap/internal docs live in /Users/jsaldana/GitLocalRepo/HilliumOS-Private (confidential)."
  - "ROOT GUARD: Do not cd outside this repo unless the user explicitly asks."

verification:
  repair_loop:
    enabled: true
    max_attempts: 3
    timeout_per_attempt_s: 120

# v10.7.90: Forge container integration
build:
  strategy: "auto"              # auto, forge, host
  container: "hillium-forge"    # Docker container name
  
  force_container_for:          # ALWAYS use container if available
    - "cargo"
    - "rustc"
    - "pytest"
    - "python3"
    - "python"
    - "pip"
    - "piper"
    - "espeak"
    - "which"                   # Verify binaries in container
  
  force_host_for:               # NEVER use container
    - "git"
    - "docker"
    - "make"

# ← NUEVO: Workspace setup configuration
forge:
  workspace_path: "/workspace"  # ← FIXED: Project root is mounted to /workspace explicitly
  
  # ← NUEVO: Commands to run ONCE at session start
  setup_commands:
    - "python3 -m pip install -e /workspace/loqus_core --break-system-packages --no-deps"  # Install loqus_core package (no deps)
    # - "cd rust_modules && cargo build --release"
    # Future: Node dependencies  
    # - "npm install"
  
  # ← NUEVO: Re-run setup if these files change (cache invalidation)
  setup_cache_keys:
    - "pyproject.toml"     # Python packages config
    - "Cargo.toml"         # Rust (when added)
    - "package.json"       # Node (when added)
  
  # ← NUEVO: Setup behavior
  setup_policy:
    run_on_session_start: true   # Run setup when Levitate starts
    cache_duration_hours: 24     # Re-run if cache older than 24h
    fail_on_error: true          # Stop if setup fails